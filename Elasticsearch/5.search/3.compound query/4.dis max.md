---
# **Elasticsearch Dis Max Query - Documentation (Hinglish)**

## **1. Dis Max Query Kya Hai?**
Elasticsearch ka **Disjunction Max Query (Dis Max)** ek special query hai jo **multiple queries ke results ko combine karti hai** aur **sabse highest score wale document ko prioritize karti hai**. Yeh useful hota hai jab ek **document multiple queries match karta ho**, par jo **best matching score** ho, wahi final score bane.
---

## **2. Dis Max Query Ki Structure**

Dis Max Query me **2 important cheeze hoti hain**:

1. **Queries** â†’ Multiple queries jo documents match kar sakti hain.
2. **Tie Breaker** â†’ Ek optional parameter jo **low-score matches ka thoda weight add karta hai**.

### **Syntax Example:**

```json
{
  "query": {
    "dis_max": {
      "queries": [
        { "match": { "title": "laptop" } },
        { "match": { "description": "laptop" } }
      ],
      "tie_breaker": 0.3
    }
  }
}
```

---

## **3. Kaise Kaam Karta Hai?**

âœ… **Step 1:** Multiple queries ko execute karta hai.
âœ… **Step 2:** Jo query **sabse zyada score degi**, uska score final score banega.
âœ… **Step 3:** Tie breaker ka use hota hai low-score wale matches ka thoda weight add karne ke liye.

### **Example Calculation:**

Agar ek **document A** ke liye do queries match ho rahi hain:
âœ… **Query 1 Match â†’ Score 5.0**  
âœ… **Query 2 Match â†’ Score 3.0**

### **Without Tie Breaker:**

- **Final Score = 5.0** (Bas highest score wala count hota hai, 3.0 ignore ho gaya)

### **With Tie Breaker (0.2):**

- **Final Score = 5.0 + (3.0 Ã— 0.2) = 5.6**
- Ab **ye document aur bhi upar aayega** kyunki **low-score ka kuch percentage add ho gaya**.

---

## **4. Real-Life Example (E-commerce Search)**

Agar ek **E-commerce website** hai aur tum chahte ho ki **"iPhone"** keyword ko **title aur description dono me search** kiya jaye, par jo **best matching field ho uska score higher ho**, toh `dis_max` ka use kar sakte ho.

### **Query:**

```json
{
  "query": {
    "dis_max": {
      "queries": [
        { "match": { "title": "iPhone" } },
        { "match": { "description": "iPhone" } }
      ],
      "tie_breaker": 0.2
    }
  }
}
```

### **Kaise Kaam Karega?**

âœ… **Title ya Description me jo zyada match karega, uska score priority pe rahega.**  
âœ… **Jo document dono queries se match karega, uska score aur improve ho jayega.**  
âœ… **Best matching products top pe dikhai denge.**

---

## **5. Dis Max Query Kab Use Karein?**

âœ… **Multiple Fields Search** â†’ Jab ek hi term ko **alag-alag fields me search** karna ho aur best match ko priority dena ho.  
âœ… **Multiple Queries Combination** â†’ Jab **alag-alag types ki queries ko combine** karna ho aur highest score wali query ko preference dena ho.  
âœ… **Search Ranking Optimization** â†’ Jab tumhe ensure karna ho ki **sabse relevant documents top pe aaye**.

---

## **6. Bool Query vs Dis Max Query**

| Feature               | Bool Query                                   | Dis Max Query                         |
| --------------------- | -------------------------------------------- | ------------------------------------- |
| **Score Calculation** | Sab queries ke scores **add hote hain**      | **Sirf highest score rakha jata hai** |
| **Best for**          | Jab multiple criteria ke combination chahiye | Jab sirf best matching score chahiye  |
| **Performance**       | Thoda heavy ho sakta hai                     | Faster in some cases                  |
| **Tie Breaker**       | Nahi hota                                    | Hota hai (optional)                   |

---

## **7. Conclusion**

ðŸ”¹ `Dis Max Query` sirf **highest score count karti hai**, par **tie_breaker se low scores ka thoda weight bhi add hota hai**.  
ðŸ”¹ **Multi-query matching documents better ranking le sakte hain**.  
ðŸ”¹ Agar tum **search results ko optimize** karna chahte ho taaki **best match top pe aaye**, toh `dis_max` best approach hai.

---
